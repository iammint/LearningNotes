# How does the Internet work?
## 从IP地址开始
如果你通过网络服务提供商ISP连接互联网，你通常会被分配一个暂时的IP地址。如果你通过局域网LAN连接网络，你的电脑也许会有一个永久的IP地址或从DHCP动态主机配置协议获得一个暂时的IP地址。不管是哪种情况，只要你连接上互联网，你的电脑就会有一个独一无二的IP地址。

## 通过协议栈在互联网上通信
服务器也将分配到一个地址，访问网站就是在访问服务器，服务端是在远程计算机上运行的应用程序。发送请求被转换为电子信号，通过电缆发送给服务器，在服务器再将电子信号转换为计算机可以使用的文本数据。

>这一切通过协议栈：TCP/IP协议族来完成。TCP/IP协议族共分为四层：应用层、TCP传输控制层、IP网络层、链路层，网络协议通过分层来明确每一层的工作职责，通过定义明确的接口来协同工作。

|  协议层   | 职责  |
|  :----:  | :----:  |
| 应用层  | 提供特定于应用程序的协议，如HTTP,WWW, e-mail, FTP等 |
| 传输控制层  | 发送数据包到计算机上使用特定端口号的应用程序 |
| 网络层  | 使用IP地址将数据包发送到特定的计算机 |
| 链路层  | 将二进制数据包与网络信号相互之间转换 |

一般来说数据包的下一站是另一个路由器

![ruswp_diag2.gif](https://media.haochen.me/ruswp_diag2.gif)

## 网络基础设施
> 什么构成了互联网呢？
> - 互联网服务供应商为他们的拨号客户维护一个调制解调器池modem。这是由某种形式的计算机（通常是专用的）管理的，它控制从调制解调器池到主干线backbone或专用线路由器的数据流。这种设置可以被称为端口服务器，因为它 "服务 "于对网络的访问。计费和使用信息通常也在这里收集。
> - 通过调制解调器modem，猫将计算机的数字信号翻译成可沿普通电话线传送的模拟信号后，在公共电话网络进行传输，公共电话网络通过连接网络服务提供商Internet service provider也即ISP来接入互联网（移动联通电信都是ISP），数据包经过电话网络和ISP之后，它们将路由到ISP的主干网络The backbone，数据包一般会经过多个路由器并经过多个主干网直到找到目的地.
>  - 互联网主干网络由许多相互连接的大型网络组成，这些大型网络被称为网络服务提供商，简称NSP，NSP是为ISP提供主干网络服务的公司。ISP可以在NSP处批量购入带宽，为客户提供网络接入服务。


![ruswp_diag3.gif](https://media.haochen.me/ruswp_diag3.gif)


## 互联网基础设施
> 互联网主干网络由大量巨大的电信网络——Network Service Providers网络服务提供商（NSPs）互相连接而成，这些电信网络彼此交换数据流量包，

每个电信网络都要接入三个Network Access Points 网络接入点（NAP）。数据流量包在NAP上可以从一个NSP的主干网络跳到另一个NSP的主干网络上。NAP还连接Metropolitan Area 
Exchanges 都会交换（MAEs）。

MAE和NAP作用相同，区别在于MAE是私有的。NAP和MAE都被当做是互联网交换点Internet Exchange Points or （IXs）。NAP还将宽带卖给更小的电信网络，比如ISPs网络服务提供商。

![ruswp_diag4.gif](https://media.haochen.me/ruswp_diag4.gif)


## 互联网路由层次结构

> 数据包是如何在互联网上找到出路的呢？
> - 路由器通常在网络之间连接，以在网络之间路由数据包。


![ruswp_diag5.gif](https://media.haochen.me/ruswp_diag5.gif)

顶部较大的 NSP 主干网通过 NAP 连接。在它们下面是几个子网络，在它们下面，有更多的子网络。底部是两个连接了计算机的局域网。

当数据包到达路由器时，路由器会检查源计算机上 IP 协议层放在那里的 IP 地址。路由器检查其路由表。如果找到包含 IP 地址的网络，则数据包将发送到该网络。如果未找到包含 IP 地址的网络，则路由器会将数据包发送到默认路由，通常是在主干网层次结构中向上发送到下一个路由器。希望下一个路由器知道将数据包发送到哪里。否则，数据包将再次向上路由，直到到达 NSP 主干网。

连接到 NSP 主干网的路由器拥有最大的路由表，在这里，数据包将被路由到正确的主干网，在那里它将开始通过越来越小的网络"向下"的旅程，直到找到它的目的地。

## 域名和地址解析
> DNS是一个分布式数据库，用于跟踪计算机的名称及其在互联网上的相应IP地址。

连接到互联网的许多计算机都托管 DNS 数据库的一部分以及允许其他人访问该数据库的软件。这些计算机称为 DNS 服务器。没有DNS服务器包含整个数据库;它们只包含它的子集。如果 DNS 服务器不包含另一台计算机请求的域名，则 DNS 服务器会将请求计算机重定向到另一台 DNS 服务器。

> 域名服务的结构类似于 IP 路由层次结构。请求名称解析的计算机将被重定向到层次结构中"向上"，直到找到可以解析请求中的域名的 DNS 服务器。
> - 当您在 Web 浏览器中输入 Web 地址时，浏览器首先连接到主 DNS 服务器。获取您输入的域名的 IP 地址后，浏览器将连接到目标计算机并请求所需的网页。

## 互联网协议
互联网上最常用的服务之一是World Wide Web万维网（WWW）。*The World Wide Web is a popular way to publish information on the internet.*  使Web工作的应用程序协议是超文本传输协议或HTTP。
- 不要将其与超文本标记语言 （HTML） 混淆。HTML是用于编写网页的语言。HTTP 是 Web 浏览器和 Web 服务器用来通过 Internet 相互通信的协议。它是一个应用程序级协议，因为它位于协议栈中的 TCP 层之上，并由特定应用程序用于相互通信。在这种情况下，应用程序是Web浏览器和Web服务器。
- HTTP 是一种基于文本的无连接协议。客户端（Web 浏览器）向 Web 服务器发送 Web 元素（如网页和图像）的请求。在请求由服务器提供服务后，客户端和服务器之间通过 Internet 的连接将断开。必须为每个请求建立新连接。大多数协议都是面向连接的。这意味着相互通信的两台计算机通过 Internet 保持连接打开。然而，HTTP却没有。在客户端发出 HTTP 请求之前，必须与服务器建立新的连接。

当您在 Web 浏览器中键入 URL 时，将发生以下情况：

1. 如果 URL 包含域名，浏览器将首先连接到域名服务器，并检索 Web 服务器的相应 IP 地址。
2. Web 浏览器连接到 Web 服务器，并（通过协议栈）为所需的网页发送 HTTP 请求。
3. Web 服务器接收请求并检查所需的页面。如果该页面存在，则 Web 服务器将发送该页面。如果服务器找不到请求的页面，它将发送 HTTP 404 错误消息。（404的意思是"页面未找到")
4. Web 浏览器接收回页面并关闭连接。
5. 然后，浏览器解析页面并查找完成网页所需的其他页面元素。这些通常包括图像，小程序等。
6. 对于所需的每个元素，浏览器会为每个元素向服务器发出额外的连接和 HTTP 请求。
7. 当浏览器完成加载所有图像，小程序等时，页面将完全加载到浏览器窗口中。

## 什么是 SSL？
> SSL是Secure Sockets Layer的缩写，是一系列加密技术，允许Web用户保护他们通过Internet传输的信息的隐私。

在后台，SSL通过将数据转换为只有收件人知道如何破译的编码消息来实现这一点。如果恶意方正在收听对话，它只会看到看似随机的字符串，而不会看到您的电子邮件，Facebook帖子，信用卡号或其他私人信息的内容。


## 什么是cloud云？
> 云是一种计算方法。通过将文件存储在服务器上并通过互联网交付软件，云计算为用户提供了更简单、更可靠的计算体验。


## Network、互联网、Internet、web的区别与联系
![relation.png](https://media.haochen.me/relation.png)


